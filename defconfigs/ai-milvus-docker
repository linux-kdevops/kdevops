# AI benchmarking configuration for Milvus vector database testing
CONFIG_KDEVOPS_FIRST_RUN=n
CONFIG_LIBVIRT=y
CONFIG_LIBVIRT_URI="qemu:///system"
CONFIG_LIBVIRT_HOST_PASSTHROUGH=y
CONFIG_LIBVIRT_MACHINE_TYPE_DEFAULT=y
CONFIG_LIBVIRT_CPU_MODEL_PASSTHROUGH=y
CONFIG_LIBVIRT_VCPUS=4
CONFIG_LIBVIRT_RAM=8192
CONFIG_LIBVIRT_OS_VARIANT="generic"
CONFIG_LIBVIRT_STORAGE_POOL_PATH_CUSTOM=n
CONFIG_LIBVIRT_STORAGE_POOL_CREATE=y
CONFIG_LIBVIRT_EXTRA_STORAGE_DRIVE_NVME=y
CONFIG_LIBVIRT_EXTRA_STORAGE_DRIVE_SIZE="100"

# Network configuration
CONFIG_KDEVOPS_NETWORK_TYPE_NATUAL_BRIDGE=y

# Workflow configuration
CONFIG_WORKFLOWS=y
CONFIG_WORKFLOWS_TESTS=y
CONFIG_WORKFLOWS_LINUX_TESTS=y
CONFIG_WORKFLOWS_DEDICATED_WORKFLOW=y
CONFIG_KDEVOPS_WORKFLOW_DEDICATE_AI=y

# AI workflow configuration
CONFIG_AI_TESTS_VECTOR_DATABASE=y
CONFIG_AI_VECTOR_DB_MILVUS=y
CONFIG_AI_VECTOR_DB_MILVUS_DOCKER=y

# Milvus Docker configuration
CONFIG_AI_VECTOR_DB_MILVUS_CONTAINER_IMAGE_2_5=y
CONFIG_AI_VECTOR_DB_MILVUS_CONTAINER_IMAGE_STRING="milvusdb/milvus:v2.5.10"
CONFIG_AI_VECTOR_DB_MILVUS_CONTAINER_NAME="milvus-ai-benchmark"
CONFIG_AI_VECTOR_DB_MILVUS_ETCD_CONTAINER_IMAGE_STRING="quay.io/coreos/etcd:v3.5.18"
CONFIG_AI_VECTOR_DB_MILVUS_ETCD_CONTAINER_NAME="milvus-etcd"
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_CONTAINER_IMAGE_STRING="minio/minio:RELEASE.2023-03-20T20-16-18Z"
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_CONTAINER_NAME="milvus-minio"
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_ACCESS_KEY="minioadmin"
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_SECRET_KEY="minioadmin"

# Docker storage configuration
CONFIG_AI_VECTOR_DB_MILVUS_DOCKER_DATA_PATH="/data/milvus-data"
CONFIG_AI_VECTOR_DB_MILVUS_DOCKER_ETCD_DATA_PATH="/data/milvus-etcd"
CONFIG_AI_VECTOR_DB_MILVUS_DOCKER_MINIO_DATA_PATH="/data/milvus-minio"
CONFIG_AI_VECTOR_DB_MILVUS_DOCKER_NETWORK_NAME="milvus-network"

# Docker ports
CONFIG_AI_VECTOR_DB_MILVUS_PORT=19530
CONFIG_AI_VECTOR_DB_MILVUS_WEB_UI_PORT=9091
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_API_PORT=9000
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_CONSOLE_PORT=9001
CONFIG_AI_VECTOR_DB_MILVUS_ETCD_CLIENT_PORT=2379
CONFIG_AI_VECTOR_DB_MILVUS_ETCD_PEER_PORT=2380

# Docker resource limits
CONFIG_AI_VECTOR_DB_MILVUS_MEMORY_LIMIT="8g"
CONFIG_AI_VECTOR_DB_MILVUS_CPU_LIMIT="4.0"
CONFIG_AI_VECTOR_DB_MILVUS_ETCD_MEMORY_LIMIT="1g"
CONFIG_AI_VECTOR_DB_MILVUS_MINIO_MEMORY_LIMIT="2g"

# Milvus connection configuration
CONFIG_AI_VECTOR_DB_MILVUS_COLLECTION_NAME="benchmark_collection"
CONFIG_AI_VECTOR_DB_MILVUS_DIMENSION=768
CONFIG_AI_VECTOR_DB_MILVUS_DATASET_SIZE=1000000
CONFIG_AI_VECTOR_DB_MILVUS_BATCH_SIZE=10000
CONFIG_AI_VECTOR_DB_MILVUS_NUM_QUERIES=10000

# Benchmark configuration
CONFIG_AI_BENCHMARK_ITERATIONS=3
# Vector dataset configuration
CONFIG_AI_VECTOR_DB_MILVUS_DIMENSION=128

# Test runtime configuration
CONFIG_AI_BENCHMARK_RUNTIME="180"
CONFIG_AI_BENCHMARK_WARMUP_TIME="30"

# Query patterns for CI testing
CONFIG_AI_BENCHMARK_QUERY_TOPK_1=y
CONFIG_AI_BENCHMARK_QUERY_TOPK_10=y
CONFIG_AI_BENCHMARK_QUERY_TOPK_100=n

# Batch size configuration for CI
CONFIG_AI_BENCHMARK_BATCH_1=y
CONFIG_AI_BENCHMARK_BATCH_10=y
CONFIG_AI_BENCHMARK_BATCH_100=n

# Index configuration
CONFIG_AI_INDEX_HNSW=y
CONFIG_AI_INDEX_TYPE="HNSW"
CONFIG_AI_INDEX_HNSW_M=16
CONFIG_AI_INDEX_HNSW_EF_CONSTRUCTION=200
CONFIG_AI_INDEX_HNSW_EF=64

# Results and graphing
CONFIG_AI_BENCHMARK_RESULTS_DIR="/data/ai-benchmark"
CONFIG_AI_BENCHMARK_ENABLE_GRAPHING=y
CONFIG_AI_BENCHMARK_GRAPH_FORMAT="png"
CONFIG_AI_BENCHMARK_GRAPH_DPI=300
CONFIG_AI_BENCHMARK_GRAPH_THEME="default"

# Filesystem configuration
CONFIG_AI_FILESYSTEM_XFS=y
CONFIG_AI_FILESYSTEM="xfs"
CONFIG_AI_FSTYPE="xfs"
CONFIG_AI_XFS_MKFS_OPTS="-f -s size=4096"
CONFIG_AI_XFS_MOUNT_OPTS="rw,relatime,attr2,inode64,logbufs=8,logbsize=32k,noquota"

# Baseline/dev testing setup
CONFIG_KDEVOPS_BASELINE_AND_DEV=y
# Build Linux
CONFIG_WORKFLOW_LINUX_CUSTOM=y
CONFIG_BOOTLINUX_AB_DIFFERENT_REF=y
