# pNFS configuration for filesystem testing with fstests

# Use libvirt/QEMU for virtualization
CONFIG_GUESTFS=y
CONFIG_LIBVIRT=y

# Enable workflows
CONFIG_WORKFLOWS=y
CONFIG_WORKFLOW_LINUX_CUSTOM=y

# Linux kernel building with 9P for development
CONFIG_BOOTLINUX=y
CONFIG_BOOTLINUX_9P=y
CONFIG_BOOTLINUX_LINUS=y
CONFIG_BOOTLINUX_TREE_LINUS=y

# Enable testing workflows
CONFIG_WORKFLOWS_TESTS=y
CONFIG_WORKFLOWS_LINUX_TESTS=y
CONFIG_WORKFLOWS_DEDICATED_WORKFLOW=y

# Enable fstests workflow with pNFS testing
CONFIG_KDEVOPS_WORKFLOW_DEDICATE_FSTESTS=y
CONFIG_KDEVOPS_WORKFLOW_ENABLE_FSTESTS=y
CONFIG_FSTESTS_NFS=y
CONFIG_FSTESTS_FSTYP="nfs"

# Enable manual coverage for NFS to select pNFS
CONFIG_FSTESTS_NFS_MANUAL_COVERAGE=y
CONFIG_FSTESTS_NFS_SECTION_PNFS=y
CONFIG_FSTESTS_NFS_SECTION_V42=y
CONFIG_FSTESTS_NFS_SECTION_V41=y

# Use kdevops NFS server for fstests
CONFIG_FSTESTS_USE_KDEVOPS_NFSD=y

# Enable systemd journal remote for debugging
CONFIG_DEVCONFIG_ENABLE_SYSTEMD_JOURNAL_REMOTE=y
