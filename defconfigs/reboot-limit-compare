# Demo defconfig for reboot-limit workflow with comparison testing
#
# This enables the reboot-limit workflow to compare regular reboots
# vs kexec reboots with separate performance monitoring and analysis.

# Enable workflows and reboot-limit workflow
CONFIG_WORKFLOWS=y
CONFIG_WORKFLOWS_TESTS=y
CONFIG_WORKFLOWS_TESTS_DEMOS=y
CONFIG_WORKFLOWS_DEDICATED_WORKFLOW=y
CONFIG_WORKFLOWS_REBOOT_LIMIT=y

# Enable baseline and dev testing
CONFIG_KDEVOPS_BASELINE_AND_DEV=y

# Enable data collection for analysis
CONFIG_REBOOT_LIMIT_ENABLE_DATA_COLLECTION=y
CONFIG_REBOOT_LIMIT_ENABLE_SYSTEMD_ANALYZE=y

# Enable loop testing for continuous operation
CONFIG_REBOOT_LIMIT_ENABLE_LOOP=y
CONFIG_REBOOT_LIMIT_LOOP_STEADY_STATE_GOAL=100

# Set a reasonable number of reboots per test run
CONFIG_REBOOT_LIMIT_BOOT_MAX=100

# Use comparison mode to test both regular and kexec reboots
CONFIG_REBOOT_LIMIT_TYPE_COMPARE_BOTH=y

# We'll build our kernel
CONFIG_WORKFLOW_LINUX_CUSTOM=y
CONFIG_BOOTLINUX=y
CONFIG_BOOTLINUX_9P=y

# Enable A/B testing with different kernel references
CONFIG_BOOTLINUX_AB_DIFFERENT_REF=y
