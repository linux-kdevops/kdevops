if TERRAFORM_GCE_MACHINE_FAMILY_{{ series_kconfig_name }}

choice
	prompt "GCE Machine type"
	default {{ default_type_config }}
	help
	  {{ help_text }}

{% for machine in machine_types %}
config TERRAFORM_GCE_MACHINE_{{ machine.kconfig_name }}
	bool "{{ machine.name }}"
{% if architecture == 'arm64' %}
	depends on TARGET_ARCH_ARM64
{% else %}
	depends on TARGET_ARCH_X86_64
{% endif %}
	help
	  {{ machine.vcpus }} vCPU{{ 's' if machine.vcpus > 1 else '' }}{% if machine.vcpus >= 2 %} ({{ (machine.vcpus / 2)|int }} core{{ 's' if (machine.vcpus / 2)|int > 1 else '' }}){% endif %} and {{ machine.memory_gb|int if machine.memory_gb == machine.memory_gb|int else machine.memory_gb|round(1) }}GB of memory.
{% if machine.is_shared_cpu %}
	  Shared-core machine type.
{% endif %}

{% endfor %}
endchoice

config TERRAFORM_GCE_MACHINE_TYPE
	string
	output yaml
{% for machine in machine_types %}
	default "{{ machine.name }}" if TERRAFORM_GCE_MACHINE_{{ machine.kconfig_name }}
{% endfor %}

config TERRAFORM_GCE_IMAGE_TYPE
	string
	output yaml
	default "{{ boot_disk_type }}"

endif # TERRAFORM_GCE_MACHINE_FAMILY_{{ series_kconfig_name }}
